---
layout: post
title:  "Windowsä¸‹ä½¿ç”¨scoopå®‰è£…è½¯ä»¶"
summary: "scoop"
author: Miles
date: '2025-06-12 8:35:23 +0530'
category: common
thumbnail: /assets/img/posts/windows.png
keywords: window scoop 
permalink: /blog/scoop/
usemathjax: true
---
[toc]
ref: (https://github.com/ScoopInstaller/Scoop)
# 1.å®‰è£… PowerShell 5.0 ä»¥ä¸Šç‰ˆæœ¬ 
win10ï¼š å·²è‡ªå¸¦ï¼›
win7 x64ï¼š ä¸‹è½½ Win7AndW2K8R2-KB3191566-x64.zipï¼Œå®‰è£…ï¼›

ref: https://docs.microsoft.com/zh-cn/powershell/scripting/install/installing-windows-powershell?view=powershell-6
# 2.ä»¥å½“å‰Winè´¦æˆ·è¿è¡ŒPowerShell
åœ¨ PowerShell ä¸­è¾“å…¥ä¸‹é¢å†…å®¹ï¼Œä¿è¯å…è®¸æœ¬åœ°è„šæœ¬çš„æ‰§è¡Œï¼š
```
Set-ExecutionPolicy RemoteSigned -Scope CurrentUser

irm get.scoop.sh -outfile 'install.ps1'
.\install.ps1 -RunAsAdmin

```
é…ç½®è½¯ä»¶å®‰è£…ç›®å½•(å¯é€‰æ“ä½œ)
```
$env:SCOOP='d://scoop'
[Environment]::SetEnvironmentVariable('SCOOP', $env:SCOOP, 'User')
```
å…¨å±€ç›®å½•çœ‹è‡ªå·±éœ€æ±‚(é»˜è®¤è·¯å¾„C:\ProgramData\scoopï¼‰
```
$env:SCOOP_GLOBAL='D:\scoop\global'
[environment]::setEnvironmentVariable('SCOOP_GLOBAL',$env:SCOOP_GLOBAL,'Machine')

```
# 3. ç„¶åæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å®‰è£… Scoopï¼šè¾“å…¥
```
iwr -useb get.glimmer.ltd | iex
```
æˆ–è€… 
```
iwr -useb get.scoop.sh | iex 
```
æˆ–è€…ç›´æ¥å›½å†…ä¸€é”®å®‰è£…è„šæœ¬
```
iwr -useb https://gitee.com/glsnames/scoop-installer/raw/master/bin/install.ps1 | iex

scoop config SCOOP_REPO 'https://gitee.com/glsnames/scoop-installer'
```

## SCOOPå®‰è£…é‡åˆ° â€œRAW.GITHUBUSERCONTENT.COMæœªèƒ½è§£æâ€ è§£å†³æ–¹æ¡ˆ
raw.githubusercontent.comæœªèƒ½è§£æï¼Ÿæ‰‹åŠ¨pingäº†ä¸€ä¸‹è¿˜çœŸæ²¡å›å¤ï¼ŒæŸ¥ä¸‹æ˜¯ä¸æ˜¯çœŸçš„æ²¡æœ‰è§£æï¼šhttps://www.ipaddress.com/
![e9069ca4d8b8ae4a85bbed098123c03e.png](:/997a30d7dd6648dfac98e2806c2ab892)
èƒ½pingé€šï¼Œå‰©ä¸‹å°±æ˜¯æ”¹hostçš„äº‹æƒ…äº†ï¼š
åœ¨C:\Windows\System32\drivers\etcä¸‹æ‰¾åˆ°hostæ–‡ä»¶
æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š
```
199.232.68.133 raw.githubusercontent.com
```
å†pingä¸€ä¸‹raw.githubusercontent.comï¼Œå¯ä»¥pingé€šï¼Œscoopèƒ½æ­£å¸¸ä¸‹è½½äº†

æŸ¥äº†ä¸€ä¸‹åŸå› ï¼Œraw.githubusercontent.comçš„DNSè§£æç«Ÿç„¶å› æŸäº›åŸå› ç»™ä¸´æ—¶æ±¡æŸ“äº†ï¼Œå…ˆä¸´æ—¶æ”¹hostç”¨å§

## å‡ºç°Running the installer as administrator is disabled by default, see https://github.com/ScoopInstaller/Install#for-admin for details.é”™è¯¯
Installation under the administrator console has been disabled by default for security considerations. If you know what you are doing and want to install Scoop as administrator. Please download the installer and manually execute it with the -RunAsAdmin parameter in an elevated console. Here is the example:
```
irm get.scoop.sh -outfile 'install.ps1'
.\install.ps1 -RunAsAdmin [-OtherParameters ...]
# I don't care about other parameters and want a one-line command
iex "& {$(irm get.scoop.sh)} -RunAsAdmin"
```

æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è§£å†³é”™è¯¯ï¼š
```
irm get.scoop.sh -outfile 'install.ps1'
.\install.ps1 -RunAsAdmin
```



# 4. ä¸­å›½ç”¨æˆ·ä¸“äº«
é•œåƒ1: https://hub.fastgit.xyz/
é•œåƒ2: https://github.com.cnpmjs.org/
é•œåƒ3: https://ghproxy.com/
é•œåƒ4: https://pd.zwc365.com/
é•œåƒ5(ä¸ªäººç»´æŠ¤): https://gitee.com/shenbo1989/ScoopInstaller_Scoop

fastgit ä½¿ç”¨è¯´æ˜ï¼š
ref: https://doc.fastgit.org/zh-cn/guide.html
ghproxy ä½¿ç”¨è¯´æ˜ï¼š
ref: https://ghproxy.com/

å¦‚æœä½ è®¿é—®Githubæœ‰é—®é¢˜ï¼Œæˆ–ä¸‹è½½å…¶ä¸­çš„èµ„æºæœ‰é—®é¢˜ï¼Œå¯å°è¯•ä»¥ä¸‹æ–¹æ³•ï¼š
è®¾ç½®Scoopä»£ç†ã€‚åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ï¼ˆPowerShellæˆ–è€…CMDä¸­éƒ½è¡Œï¼‰scoop config proxy 127.0.0.1:7890ï¼ˆä¸€çœ‹å°±æ˜¯clashç”¨æˆ·ï¼‰è®©scoopç½‘ç»œè¿æ¥èµ°ä»£ç†ï¼Œåé¢çš„ipåœ°å€å’Œç«¯å£æ ¹æ®è‡ªå·±çš„ä»£ç†è®¾ç½®ã€‚
ä½¿ç”¨Giteeé•œåƒæºã€‚å¯èƒ½å¤‡ä»½æ›´æ–°å¾—ä¸æ˜¯é‚£ä¹ˆå‹¤å¿«ï¼Œä»¥åŠå®é™…ä¸‹è½½è½¯ä»¶åŒ…åŒæ ·ä¼šæœ‰ç½‘ç»œé—®é¢˜ï¼Œæ‰€ä»¥ä¸æ¨èã€‚åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥
```
scoop config SCOOP_REPO https://gitee.com/squallliu/scoop 
```
ä¿®æ”¹ä»“åº“æºçš„åœ°å€ã€‚
ï¼ˆæˆ–è€…æ›´ç›´æ¥ç‚¹ï¼Œæ‰¾åˆ°Scoopé…ç½®æ–‡ä»¶ï¼Œè·¯å¾„C:\Users\username\.config\scoop\config.jsonï¼Œç„¶åç›´æ¥ä¿®æ”¹é‡Œé¢çš„é…ç½®ï¼Œå¦‚ä¸‹å›¾ï¼š
![6ddbf6ed6d2516d973b20682c87d0587.png](:/0197627ba9d44f62a92a4023ec6693ee)

# 5.å¯¹scoop_repoè¿›è¡Œæ›´æ”¹
è§£é™¤ssléªŒè¯åï¼Œå†æ¬¡gitå³å¯
```
git config --global http.sslVerify "false"
```
ä½¿ç”¨ github mirror æ›´æ–° Scoopã€ bucket åº“
## ä»¥ giteeä¸ºä¾‹è®¾ç½®scoopæº
```
#scoop config SCOOP_REPO 'https://gitee.com/glsnames/scoop-installer'
#scoop update

scoop config SCOOP_REPO https://gitee.com/squallliu/scoop

scoop update

```
è®¾ç½® bucket æº
```
# scoop bucket rm main
#scoop bucket add main 'https://github.com/ScoopInstaller/Main'
scoop bucket add main https://gitcode.net/mirrors/ScoopInstaller/Main
# scoop bucket rm extras 
scoop bucket add extras 'https://gitee.com/scoop-bucket/extras.git'
# scoop bucket rm versions 
scoop bucket add versions 'https://gitee.com/scoop-bucket/versions.git'
# scoop bucket rm dorado 
scoop bucket add dorado https://gitee.com/scoop-bucket/dorado.git
# scoop bucket rm backit 
scoop bucket add backit 'https://gitee.com/scoop-bucket/backit.git'
```


## åˆ‡æ¢å—å¤§æº
```
 scoop bucket add main https://mirror.nju.edu.cn/git/scoop-main.git
 scoop bucket add extras https://mirror.nju.edu.cn/git/scoop-extras.git
 scoop bucket add versions https://gitee.com/scoop-bucket/versions.git
 scoop config SCOOP_REPO 'https://gitee.com/glsnames/scoop-installer'
```

## åˆ‡æ¢githubæº


```
#scoop config "SCOOP_REPO" "https://github.com/ScoopInstaller/Scoop"

scoop config "SCOOP_REPO" "https://github.com/lukesampson/scoop"
scoop update
```
é‡æ–°è®¾ç½® bucket æº
```
scoop bucket rm main
scoop bucket add main 
scoop bucket rm extras 
scoop bucket add extras 
# scoop bucket rm versions 
scoop bucket add versions 

scoop bucket add dorado https://github.com/chawyehsu/dorado
# ç§‘ç ”è½¯ä»¶
scoop bucket add scoopet https://github.com/ivaquero/scoopet 

# ç ´è§£è½¯ä»¶
scoop bucket add scoop-raresoft https://github.com/L-Trump/scoop-raresoft
```

# 6. å®‰è£… aria2
```
scoop install aria2
```
å¯¹aria2è¿›è¡Œè®¾ç½®  

```
scoop config aria2-enabled true

# å¢åŠ å¹¶å‘è¿æ¥æ•°ï¼ˆé»˜è®¤5ï¼Œå»ºè®®ä¸è¶…è¿‡16ï¼‰
scoop config aria2-max-connection-per-server 16

# å¯ç”¨ç£ç›˜ç¼“å­˜å‡å°‘IOï¼ˆé»˜è®¤32Mï¼‰
scoop config aria2-disk-cache 64M

# æœ€å°åˆ†ç‰‡å¤§å°ï¼ˆé»˜è®¤5Mï¼Œé¿å…å°æ–‡ä»¶åˆ†ç‰‡ï¼‰
scoop config aria2-min-split-size 1M
```

å…³é—­ Aria2ï¼ˆå›é€€åˆ°å†…ç½®ä¸‹è½½å™¨ï¼‰ï¼š
```
scoop config aria2-enabled false
```

## åœ¨aria2ä¸­é…ç½®ä»£ç†æ–¹æ³•ï¼šé…ç½®æ–‡ä»¶ï¼ˆæ°¸ä¹…ç”Ÿæ•ˆï¼‰
ç¼–è¾‘ Aria2 é…ç½®æ–‡ä»¶ï¼ˆé»˜è®¤ä½ç½®ï¼š~/.aria2/aria2.confï¼‰
æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š
```
ini
# HTTP/HTTPS ä»£ç†
http-proxy=http://ä»£ç†IP:ç«¯å£
https-proxy=http://ä»£ç†IP:ç«¯å£

# SOCKS5 ä»£ç†
all-proxy=socks5://ä»£ç†IP:ç«¯å£

# å¸¦è®¤è¯çš„ä»£ç†
http-proxy-user=ç”¨æˆ·å
http-proxy-passwd=å¯†ç 
```
å¯åŠ¨æ—¶åŠ è½½é…ç½®ï¼š
```bash
aria2c --conf-path="~/.aria2/aria2.conf"
```
## ğŸ”§ åœ¨ Scoop ä¸­é…ç½® Aria2 ä»£ç†ï¼ˆWindowsï¼‰
è®¾ç½®å…¨å±€ä»£ç†å‚æ•°ï¼š
```powershell
scoop config aria2-options '--all-proxy=http://ä»£ç†IP:ç«¯å£'
```
å¦‚éœ€è®¤è¯ï¼š
```powershell
scoop config aria2-options '--all-proxy=http://ç”¨æˆ·å:å¯†ç @ä»£ç†IP:ç«¯å£'
```
éªŒè¯é…ç½®ï¼š
```powershell
scoop config aria2-options
```
## ğŸŒ ä»£ç†ç±»å‹è¯´æ˜
å‚æ•°	åè®®æ”¯æŒ	ç¤ºä¾‹æ ¼å¼
--http-proxy	HTTPèµ„æº	http://192.168.1.10:8080
--https-proxy	HTTPSèµ„æº	http://192.168.1.10:8080
--all-proxy	æ‰€æœ‰åè®®	socks5://127.0.0.1:1080
## ğŸ” éªŒè¯ä»£ç†æ˜¯å¦ç”Ÿæ•ˆ
ä¸‹è½½æµ‹è¯•æ–‡ä»¶ï¼š
```bash
aria2c --all-proxy="ä»£ç†åœ°å€" http://example.com/testfile
```
æŸ¥çœ‹æ—¥å¿—ä¸­çš„ä»£ç†è¿æ¥ä¿¡æ¯ï¼š
```text
[NOTICE] Using proxy: http://ä»£ç†IP:ç«¯å£
```

# 7. ä»¥ä¸‹ä¸¤ä¸ªæ˜¯å®˜æ–¹bucketçš„å›½å†…é•œåƒï¼Œæ‰€æœ‰è½¯ä»¶å»ºè®®ä¼˜å…ˆä»è¿™é‡Œä¸‹è½½ã€‚
å›½å†…é•œåƒ
```
scoop bucket add dorado https://gitee.com/scoop-bucket/dorado.git
```
githbué•œåƒ
```
# ç§‘ç ”è½¯ä»¶
scoop bucket add scoopet https://github.com/ivaquero/scoopet 
# ç ´è§£è½¯ä»¶
scoop bucket add https://github.com/L-Trump/scoop-raresoft

scoop bucket add dorado 'https://github.com/h404bi/dorado'
scoop bucket add nirsoft
scoop bucket add portablesoft 'https://github.com/shenbo/portablesoft'
```
# 8.æ˜ç¡®æŒ‡å®šå®‰è£…æ­¤ bucket ï¼ˆè½¯ä»¶æºï¼‰ä¸­çš„çš„ç¨‹åº
å¦‚æœæˆ‘ä»¬è¦å®‰è£…ã€ŒğŸŸ doradoã€ä»“çš„æŸé¡¹ Appï¼Œç›´æ¥é€šè¿‡ä¸‹é¢çš„è¿™ä¸ªå‘½ä»¤å®‰è£…å³å¯ï¼š
```
scoop install dorado/<app_name>
```


# 9.  ä¿®æ”¹ scoop å®‰è£…æ–‡ä»¶æºç ï¼Œ åŠ é€Ÿè½¯ä»¶æºæ–‡ä»¶ä» github ä¸Šçš„ä¸‹è½½
æ‰‹åŠ¨ä¿®æ”¹ ~\scoop\apps\scoop\current\lib\install.ps1 æ–‡ä»¶:
```
cd ~\scoop\apps\scoop\current\ | code lib\install.ps1

# line 245 å·¦å³ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š
# $urlstxt_content += "$(handle_special_urls $url)`n"
$urlstxt_content += "$(handle_special_urls $url)`n".Replace("https://github.com", "https://hub.fastgit.xyz").Replace("https://raw.githubusercontent.com", "https://raw.fastgit.org")
```
å‘½ä»¤ä¿®æ”¹:
```
$file__path = '~\scoop\apps\scoop\current\lib\install.ps1'
$old_string = '$urlstxt_content += "$(handle_special_urls $url)`n"'
$new_string = '$urlstxt_content += "$(handle_special_urls $url)`n".Replace("https://github.com", "https://hub.fastgit.xyz").Replace("https://raw.githubusercontent.com", "https://raw.fastgit.org")'
(Get-Content $file__path).replace($old_string, $new_string) | Set-Content $file__path
```
æ¢å¤:
```
cd ~\scoop\apps\scoop\current
git checkout . 
```
PS. å¿«æ·å‘½ä»¤
æ‰“å¼€ powershell é…ç½®æ–‡ä»¶ï¼š
```
code $PROFILE
```
PSS. è‡ªå®šä¹‰ä¸€ä¸ªå‘½ä»¤
```
# Set-Location ~

chcp 65001

Set-PSReadLineOption -PredictionSource History

oh-my-posh init pwsh --config ~\scoop\persist\oh-my-posh\themes\yo.omp.yaml | Invoke-Expression

function scoop-source {
    param (
        [Parameter(Mandatory = $True, Position = 0)]
        [String] $Name
    )

    $info = "USEAGE:`n  scoop-source [github | fastgit | ghproxy]`n"
    Write-Output $info

    if ($Name -eq 'github') {
        scoop config SCOOP_REPO 'https://github.com/ScoopInstaller/Scoop'

        cd ~\scoop\buckets\main         | git remote set-url origin 'https://github.com/ScoopInstaller/Main'
        cd ~\scoop\buckets\extras       | git remote set-url origin 'https://github.com/ScoopInstaller/Extras'
        cd ~\scoop\buckets\versions     | git remote set-url origin 'https://github.com/ScoopInstaller/Versions'
        cd ~\scoop\buckets\portablesoft | git remote set-url origin 'https://github.com/shenbo/portablesoft'
        scoop bucket list

        cd ~\scoop\apps\scoop\current   | git checkout .
        git diff
    }

    if ($Name -eq 'fastgit') {
        scoop config SCOOP_REPO 'https://hub.fastgit.xyz/ScoopInstaller/Scoop'

        cd ~\scoop\buckets\main         | git remote set-url origin 'https://hub.fastgit.xyz/ScoopInstaller/Main'
        cd ~\scoop\buckets\extras       | git remote set-url origin 'https://hub.fastgit.xyz/ScoopInstaller/Extras'
        cd ~\scoop\buckets\versions     | git remote set-url origin 'https://hub.fastgit.xyz/ScoopInstaller/Versions'
        cd ~\scoop\buckets\portablesoft | git remote set-url origin 'https://hub.fastgit.xyz/shenbo/portablesoft'
        scoop bucket list

        cd ~\scoop\apps\scoop\current   | git checkout .
        $file__path = '~\scoop\apps\scoop\current\lib\install.ps1'
        $old_string = '$urlstxt_content += "$(handle_special_urls $url)`n"'
        $str1 = "https://github.com"
        $str2 = "https://hub.fastgit.xyz"
        $str3 = "https://raw.githubusercontent.com"
        $str4 = "https://raw.fastgit.org"
        $new_string = '{0}.Replace("{1}", "{2}").Replace("{3}", "{4}")' -f $old_string, $str1, $str2, $str3, $str4
        (Get-Content $file__path).replace($old_string, $new_string) | Set-Content $file__path
        git diff
    }

    if ($Name -eq 'ghproxy') {
        scoop config SCOOP_REPO 'https://ghproxy.com/https://github.com/ScoopInstaller/Scoop'
        
        cd ~\scoop\buckets\main         | git remote set-url origin 'https://ghproxy.com/https://github.com/ScoopInstaller/Main'
        cd ~\scoop\buckets\extras       | git remote set-url origin 'https://ghproxy.com/https://github.com/ScoopInstaller/Extras'
        cd ~\scoop\buckets\versions     | git remote set-url origin 'https://ghproxy.com/https://github.com/ScoopInstaller/Versions'
        cd ~\scoop\buckets\portablesoft | git remote set-url origin 'https://ghproxy.com/https://github.com/shenbo/portablesoft'
        scoop bucket list

        cd ~\scoop\apps\scoop\current   | git checkout .
        $file__path = '~\scoop\apps\scoop\current\lib\install.ps1'
        $old_string = '$urlstxt_content += "$(handle_special_urls $url)`n"'
        $str1 = "https://github.com"
        $str2 = "https://ghproxy.com/https://github.com"
        $str3 = "https://raw.githubusercontent.com" 
        $str4 = "https://ghproxy.com/https://raw.githubusercontent.com"
        $new_string = '{0}.Replace("{1}", "{2}").Replace("{3}", "{4}")' -f $old_string, $str1, $str2, $str3, $str4
        (Get-Content $file__path).replace($old_string, $new_string) | Set-Content $file__path
        git diff
    }
}

```

# 10.è¿›é˜¶æ“ä½œ
éœ€è¦ git çš„ç‰ˆæœ¬æ§åˆ¶çŸ¥è¯†å’Œå¯¹ json æ–‡ä»¶çš„äº†è§£ã€‚
æˆ‘ä»¬å¯ä»¥è‡ªå·±ç»´æŠ¤ä¸€ä¸ª bucket (Creating your own bucket)ï¼Œåœ¨é‡Œé¢å†™ä¸Šæˆ‘ä»¬æ‰€éœ€è¦è½¯ä»¶çš„å®‰è£…æ­¥éª¤é…ç½®æ–‡ä»¶ï¼Œä»è€Œè‡ªå®šä¹‰ä¸€ä¸ªæˆ‘ä»¬è‡ªå·±çš„ bucketã€‚ä»¥åœ¨ GitHub ä¸Šæ‰˜ç®¡ä¸€ä¸ªåå­—ä¸º my-bucket çš„ bucket ä¸ºä¾‹å­ï¼š
## 10.1 å»ºç«‹ä¸€ä¸ª GitHub ä»“åº“åä¸º my-bucket
## 10.2 åœ¨ PowerShell ä¸­æ‰§è¡Œä¸‹é¢çš„æ“ä½œï¼Œå‘ my-bucket ä¸­æ·»åŠ ä¸€ä¸ªåå­—å« hello çš„ App:
```
#å°†ä»“åº“å…‹éš†è‡³æœ¬åœ°
git clone https://github.com/<ä½ çš„ GitHub ç”¨æˆ·å>/my-bucket 
# è¿›å…¥ my-bucket 
cd my-bucket 
# åˆ›å»º App çš„å®‰è£…é…ç½®æ–‡ä»¶ hello.json 
'{ version: "1.0", url: "https://gist.github.com/lukesampson/6446238/raw/hello.ps1", bin: "hello.ps1" }' > hello.json 
# å°†æœ¬åœ°æ›´æ”¹åŒæ­¥è‡³ GitHub 
git add .
git commit -m "add hello app"
git push
```
## 10.3 åœ¨ Scoop ä¸­å°† my-bucket æ·»åŠ è‡³ä½ çš„ Scoop bucket åˆ—è¡¨ï¼š

```
scoop bucket add my-bucket https://github.com/<ä½ çš„ GitHub ç”¨æˆ·å>/my-bucket
```

æµ‹è¯•æ˜¯å¦æˆåŠŸï¼š
```
# å®‰è£… hello è¿™ä¸ª App 
scoop install hello 
# è¿è¡Œ hello 
hello
```
ä½ åº”è¯¥ä¼šçœ‹åˆ° Hello, !ã€‚

# 11 scoop è¿˜åŸ
scoop å°½é‡å®‰è£…éç³»ç»Ÿç›˜ï¼Œ é‡è£…ç³»ç»Ÿåï¼Œè¿˜åŸæ“ä½œï¼š

åŸæ¥çš„è½¯ä»¶å®‰è£…ç›®å½•æ”¹å/æˆ–ç§»åŠ¨åˆ°å…¶ä»–ç›®å½•
å®Œæˆscoopå®‰è£…
ç­‰æ–°å®‰è£…çš„ç›®å½•å‡ºæ¥ï¼Œ ç”¨åŸæ¥çš„æ›¿æ¢æ‰
æœ€åè¿è¡Œscoop reset * è¿˜åŸå®‰è£…çš„è½¯ä»¶
